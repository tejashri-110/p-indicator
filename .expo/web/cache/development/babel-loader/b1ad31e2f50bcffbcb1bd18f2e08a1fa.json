{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.firebase = exports.default = exports.SDK_VERSION = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _common = require(\"@react-native-firebase/app/lib/common\");\n\nvar _internal = require(\"@react-native-firebase/app/lib/internal\");\n\nvar _FirestoreCollectionReference = _interopRequireDefault(require(\"./FirestoreCollectionReference\"));\n\nvar _FirestoreDocumentReference = _interopRequireDefault(require(\"./FirestoreDocumentReference\"));\n\nvar _FirestorePath = _interopRequireDefault(require(\"./FirestorePath\"));\n\nvar _FirestoreQuery = _interopRequireDefault(require(\"./FirestoreQuery\"));\n\nvar _FirestoreQueryModifiers = _interopRequireDefault(require(\"./FirestoreQueryModifiers\"));\n\nvar _FirestoreStatics = _interopRequireDefault(require(\"./FirestoreStatics\"));\n\nvar _FirestoreTransactionHandler = _interopRequireDefault(require(\"./FirestoreTransactionHandler\"));\n\nvar _FirestoreWriteBatch = _interopRequireDefault(require(\"./FirestoreWriteBatch\"));\n\nvar _version = _interopRequireDefault(require(\"./version\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar namespace = 'firestore';\nvar nativeModuleName = ['RNFBFirestoreModule', 'RNFBFirestoreCollectionModule', 'RNFBFirestoreDocumentModule', 'RNFBFirestoreTransactionModule'];\nvar nativeEvents = ['firestore_collection_sync_event', 'firestore_document_sync_event', 'firestore_transaction_event'];\n\nvar FirebaseFirestoreModule = function (_FirebaseModule) {\n  (0, _inherits2.default)(FirebaseFirestoreModule, _FirebaseModule);\n\n  var _super = _createSuper(FirebaseFirestoreModule);\n\n  function FirebaseFirestoreModule(app, config) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, FirebaseFirestoreModule);\n    _this = _super.call(this, app, config);\n    _this._referencePath = new _FirestorePath.default();\n    _this._transactionHandler = new _FirestoreTransactionHandler.default((0, _assertThisInitialized2.default)(_this));\n\n    _this.emitter.addListener(_this.eventNameForApp('firestore_collection_sync_event'), function (event) {\n      _this.emitter.emit(_this.eventNameForApp(\"firestore_collection_sync_event:\" + event.listenerId), event);\n    });\n\n    _this.emitter.addListener(_this.eventNameForApp('firestore_document_sync_event'), function (event) {\n      _this.emitter.emit(_this.eventNameForApp(\"firestore_document_sync_event:\" + event.listenerId), event);\n    });\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(FirebaseFirestoreModule, [{\n    key: \"batch\",\n    value: function batch() {\n      return new _FirestoreWriteBatch.default(this);\n    }\n  }, {\n    key: \"clearPersistence\",\n    value: function clearPersistence() {\n      return _regenerator.default.async(function clearPersistence$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regenerator.default.awrap(this.native.clearPersistence());\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"waitForPendingWrites\",\n    value: function waitForPendingWrites() {\n      return _regenerator.default.async(function waitForPendingWrites$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regenerator.default.awrap(this.native.waitForPendingWrites());\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"terminate\",\n    value: function terminate() {\n      return _regenerator.default.async(function terminate$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regenerator.default.awrap(this.native.terminate());\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"collection\",\n    value: function collection(collectionPath) {\n      if (!(0, _common.isString)(collectionPath)) {\n        throw new Error(\"firebase.firestore().collection(*) 'collectionPath' must be a string value.\");\n      }\n\n      if (collectionPath === '') {\n        throw new Error(\"firebase.firestore().collection(*) 'collectionPath' must be a non-empty string.\");\n      }\n\n      var path = this._referencePath.child(collectionPath);\n\n      if (!path.isCollection) {\n        throw new Error(\"firebase.firestore().collection(*) 'collectionPath' must point to a collection.\");\n      }\n\n      return new _FirestoreCollectionReference.default(this, path);\n    }\n  }, {\n    key: \"collectionGroup\",\n    value: function collectionGroup(collectionId) {\n      if (!(0, _common.isString)(collectionId)) {\n        throw new Error(\"firebase.firestore().collectionGroup(*) 'collectionId' must be a string value.\");\n      }\n\n      if (collectionId === '') {\n        throw new Error(\"firebase.firestore().collectionGroup(*) 'collectionId' must be a non-empty string.\");\n      }\n\n      if (collectionId.indexOf('/') >= 0) {\n        throw new Error(\"firebase.firestore().collectionGroup(*) 'collectionId' must not contain '/'.\");\n      }\n\n      return new _FirestoreQuery.default(this, this._referencePath.child(collectionId), new _FirestoreQueryModifiers.default().asCollectionGroupQuery());\n    }\n  }, {\n    key: \"disableNetwork\",\n    value: function disableNetwork() {\n      return _regenerator.default.async(function disableNetwork$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regenerator.default.awrap(this.native.disableNetwork());\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"doc\",\n    value: function doc(documentPath) {\n      if (!(0, _common.isString)(documentPath)) {\n        throw new Error(\"firebase.firestore().doc(*) 'documentPath' must be a string value.\");\n      }\n\n      if (documentPath === '') {\n        throw new Error(\"firebase.firestore().doc(*) 'documentPath' must be a non-empty string.\");\n      }\n\n      var path = this._referencePath.child(documentPath);\n\n      if (!path.isDocument) {\n        throw new Error(\"firebase.firestore().doc(*) 'documentPath' must point to a document.\");\n      }\n\n      return new _FirestoreDocumentReference.default(this, path);\n    }\n  }, {\n    key: \"enableNetwork\",\n    value: function enableNetwork() {\n      return _regenerator.default.async(function enableNetwork$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _regenerator.default.awrap(this.native.enableNetwork());\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"runTransaction\",\n    value: function runTransaction(updateFunction) {\n      if (!(0, _common.isFunction)(updateFunction)) {\n        throw new Error(\"firebase.firestore().runTransaction(*) 'updateFunction' must be a function.\");\n      }\n\n      return this._transactionHandler._add(updateFunction);\n    }\n  }, {\n    key: \"settings\",\n    value: function settings(_settings) {\n      if (!(0, _common.isObject)(_settings)) {\n        throw new Error(\"firebase.firestore().settings(*) 'settings' must be an object.\");\n      }\n\n      var keys = Object.keys(_settings);\n      var opts = ['cacheSizeBytes', 'host', 'persistence', 'ssl'];\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n\n        if (!opts.includes(key)) {\n          throw new Error(\"firebase.firestore().settings(*) 'settings.\" + key + \"' is not a valid settings field.\");\n        }\n      }\n\n      if (!(0, _common.isUndefined)(_settings.cacheSizeBytes)) {\n        if (!(0, _common.isNumber)(_settings.cacheSizeBytes)) {\n          throw new Error(\"firebase.firestore().settings(*) 'settings.cacheSizeBytes' must be a number value.\");\n        }\n\n        if (_settings.cacheSizeBytes !== _FirestoreStatics.default.CACHE_SIZE_UNLIMITED && _settings.cacheSizeBytes < 1048576) {\n            throw new Error(\"firebase.firestore().settings(*) 'settings.cacheSizeBytes' the minimum cache size is 1048576 bytes (1MB).\");\n          }\n      }\n\n      if (!(0, _common.isUndefined)(_settings.host)) {\n        if (!(0, _common.isString)(_settings.host)) {\n          throw new Error(\"firebase.firestore().settings(*) 'settings.host' must be a string value.\");\n        }\n\n        if (_settings.host === '') {\n          throw new Error(\"firebase.firestore().settings(*) 'settings.host' must not be an empty string.\");\n        }\n\n        if (_common.isAndroid) {\n          if (_settings.host.startsWith('localhost')) {\n            _settings.host = _settings.host.replace('localhost', '10.0.2.2');\n          }\n\n          if (_settings.host.startsWith('127.0.0.1')) {\n            _settings.host = _settings.host.replace('127.0.0.1', '10.0.2.2');\n          }\n        }\n      }\n\n      if (!(0, _common.isUndefined)(_settings.persistence) && !(0, _common.isBoolean)(_settings.persistence)) {\n        throw new Error(\"firebase.firestore().settings(*) 'settings.persistence' must be a boolean value.\");\n      }\n\n      if (!(0, _common.isUndefined)(_settings.ssl) && !(0, _common.isBoolean)(_settings.ssl)) {\n        throw new Error(\"firebase.firestore().settings(*) 'settings.ssl' must be a boolean value.\");\n      }\n\n      return this.native.settings(_settings);\n    }\n  }]);\n  return FirebaseFirestoreModule;\n}(_internal.FirebaseModule);\n\nvar SDK_VERSION = _version.default;\nexports.SDK_VERSION = SDK_VERSION;\n\nvar _default = (0, _internal.createModuleNamespace)({\n  statics: _FirestoreStatics.default,\n  version: _version.default,\n  namespace: namespace,\n  nativeModuleName: nativeModuleName,\n  nativeEvents: nativeEvents,\n  hasMultiAppSupport: true,\n  hasCustomUrlOrRegionSupport: false,\n  ModuleClass: FirebaseFirestoreModule\n});\n\nexports.default = _default;\nvar firebase = (0, _internal.getFirebaseRoot)();\nexports.firebase = firebase;","map":{"version":3,"sources":["C:/Users/mitba/Razorpay/p-indicator-1/node_modules/@react-native-firebase/firestore/lib/index.js"],"names":["namespace","nativeModuleName","nativeEvents","FirebaseFirestoreModule","app","config","_referencePath","FirestorePath","_transactionHandler","FirestoreTransactionHandler","emitter","addListener","eventNameForApp","event","emit","listenerId","FirestoreWriteBatch","native","clearPersistence","waitForPendingWrites","terminate","collectionPath","Error","path","child","isCollection","FirestoreCollectionReference","collectionId","indexOf","FirestoreQuery","FirestoreQueryModifiers","asCollectionGroupQuery","disableNetwork","documentPath","isDocument","FirestoreDocumentReference","enableNetwork","updateFunction","_add","settings","keys","Object","opts","i","length","key","includes","cacheSizeBytes","FirestoreStatics","CACHE_SIZE_UNLIMITED","host","isAndroid","startsWith","replace","persistence","ssl","FirebaseModule","SDK_VERSION","version","statics","hasMultiAppSupport","hasCustomUrlOrRegionSupport","ModuleClass","firebase"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  isBoolean,\n  isFunction,\n  isNumber,\n  isObject,\n  isString,\n  isUndefined,\n  isAndroid,\n} from '@react-native-firebase/app/lib/common';\nimport {\n  createModuleNamespace,\n  FirebaseModule,\n  getFirebaseRoot,\n} from '@react-native-firebase/app/lib/internal';\nimport FirestoreCollectionReference from './FirestoreCollectionReference';\nimport FirestoreDocumentReference from './FirestoreDocumentReference';\nimport FirestorePath from './FirestorePath';\nimport FirestoreQuery from './FirestoreQuery';\nimport FirestoreQueryModifiers from './FirestoreQueryModifiers';\nimport FirestoreStatics from './FirestoreStatics';\nimport FirestoreTransactionHandler from './FirestoreTransactionHandler';\nimport FirestoreWriteBatch from './FirestoreWriteBatch';\nimport version from './version';\n\nconst namespace = 'firestore';\n\nconst nativeModuleName = [\n  'RNFBFirestoreModule',\n  'RNFBFirestoreCollectionModule',\n  'RNFBFirestoreDocumentModule',\n  'RNFBFirestoreTransactionModule',\n];\n\nconst nativeEvents = [\n  'firestore_collection_sync_event',\n  'firestore_document_sync_event',\n  'firestore_transaction_event',\n];\n\nclass FirebaseFirestoreModule extends FirebaseModule {\n  constructor(app, config) {\n    super(app, config);\n    this._referencePath = new FirestorePath();\n    this._transactionHandler = new FirestoreTransactionHandler(this);\n\n    // Fan out native events\n    this.emitter.addListener(this.eventNameForApp('firestore_collection_sync_event'), event => {\n      this.emitter.emit(\n        this.eventNameForApp(`firestore_collection_sync_event:${event.listenerId}`),\n        event,\n      );\n    });\n\n    this.emitter.addListener(this.eventNameForApp('firestore_document_sync_event'), event => {\n      this.emitter.emit(\n        this.eventNameForApp(`firestore_document_sync_event:${event.listenerId}`),\n        event,\n      );\n    });\n  }\n\n  batch() {\n    return new FirestoreWriteBatch(this);\n  }\n\n  async clearPersistence() {\n    await this.native.clearPersistence();\n  }\n\n  async waitForPendingWrites() {\n    await this.native.waitForPendingWrites();\n  }\n\n  async terminate() {\n    await this.native.terminate();\n  }\n\n  collection(collectionPath) {\n    if (!isString(collectionPath)) {\n      throw new Error(\n        \"firebase.firestore().collection(*) 'collectionPath' must be a string value.\",\n      );\n    }\n\n    if (collectionPath === '') {\n      throw new Error(\n        \"firebase.firestore().collection(*) 'collectionPath' must be a non-empty string.\",\n      );\n    }\n\n    const path = this._referencePath.child(collectionPath);\n\n    if (!path.isCollection) {\n      throw new Error(\n        \"firebase.firestore().collection(*) 'collectionPath' must point to a collection.\",\n      );\n    }\n\n    return new FirestoreCollectionReference(this, path);\n  }\n\n  collectionGroup(collectionId) {\n    if (!isString(collectionId)) {\n      throw new Error(\n        \"firebase.firestore().collectionGroup(*) 'collectionId' must be a string value.\",\n      );\n    }\n\n    if (collectionId === '') {\n      throw new Error(\n        \"firebase.firestore().collectionGroup(*) 'collectionId' must be a non-empty string.\",\n      );\n    }\n\n    if (collectionId.indexOf('/') >= 0) {\n      throw new Error(\n        \"firebase.firestore().collectionGroup(*) 'collectionId' must not contain '/'.\",\n      );\n    }\n\n    return new FirestoreQuery(\n      this,\n      this._referencePath.child(collectionId),\n      new FirestoreQueryModifiers().asCollectionGroupQuery(),\n    );\n  }\n\n  async disableNetwork() {\n    await this.native.disableNetwork();\n  }\n\n  doc(documentPath) {\n    if (!isString(documentPath)) {\n      throw new Error(\"firebase.firestore().doc(*) 'documentPath' must be a string value.\");\n    }\n\n    if (documentPath === '') {\n      throw new Error(\"firebase.firestore().doc(*) 'documentPath' must be a non-empty string.\");\n    }\n\n    const path = this._referencePath.child(documentPath);\n\n    if (!path.isDocument) {\n      throw new Error(\"firebase.firestore().doc(*) 'documentPath' must point to a document.\");\n    }\n\n    return new FirestoreDocumentReference(this, path);\n  }\n\n  async enableNetwork() {\n    await this.native.enableNetwork();\n  }\n\n  runTransaction(updateFunction) {\n    if (!isFunction(updateFunction)) {\n      throw new Error(\n        \"firebase.firestore().runTransaction(*) 'updateFunction' must be a function.\",\n      );\n    }\n\n    return this._transactionHandler._add(updateFunction);\n  }\n\n  settings(settings) {\n    if (!isObject(settings)) {\n      throw new Error(\"firebase.firestore().settings(*) 'settings' must be an object.\");\n    }\n\n    const keys = Object.keys(settings);\n\n    const opts = ['cacheSizeBytes', 'host', 'persistence', 'ssl'];\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      if (!opts.includes(key)) {\n        throw new Error(\n          `firebase.firestore().settings(*) 'settings.${key}' is not a valid settings field.`,\n        );\n      }\n    }\n\n    if (!isUndefined(settings.cacheSizeBytes)) {\n      if (!isNumber(settings.cacheSizeBytes)) {\n        throw new Error(\n          \"firebase.firestore().settings(*) 'settings.cacheSizeBytes' must be a number value.\",\n        );\n      }\n\n      if (\n        settings.cacheSizeBytes !== FirestoreStatics.CACHE_SIZE_UNLIMITED &&\n        settings.cacheSizeBytes < 1048576 // 1MB\n      ) {\n        throw new Error(\n          \"firebase.firestore().settings(*) 'settings.cacheSizeBytes' the minimum cache size is 1048576 bytes (1MB).\",\n        );\n      }\n    }\n\n    if (!isUndefined(settings.host)) {\n      if (!isString(settings.host)) {\n        throw new Error(\"firebase.firestore().settings(*) 'settings.host' must be a string value.\");\n      }\n\n      if (settings.host === '') {\n        throw new Error(\n          \"firebase.firestore().settings(*) 'settings.host' must not be an empty string.\",\n        );\n      }\n\n      if (isAndroid) {\n        if (settings.host.startsWith('localhost')) {\n          settings.host = settings.host.replace('localhost', '10.0.2.2');\n        }\n        if (settings.host.startsWith('127.0.0.1')) {\n          settings.host = settings.host.replace('127.0.0.1', '10.0.2.2');\n        }\n      }\n    }\n\n    if (!isUndefined(settings.persistence) && !isBoolean(settings.persistence)) {\n      throw new Error(\n        \"firebase.firestore().settings(*) 'settings.persistence' must be a boolean value.\",\n      );\n    }\n\n    if (!isUndefined(settings.ssl) && !isBoolean(settings.ssl)) {\n      throw new Error(\"firebase.firestore().settings(*) 'settings.ssl' must be a boolean value.\");\n    }\n\n    return this.native.settings(settings);\n  }\n}\n\n// import { SDK_VERSION } from '@react-native-firebase/firestore';\nexport const SDK_VERSION = version;\n\n// import firestore from '@react-native-firebase/firestore';\n// firestore().X(...);\nexport default createModuleNamespace({\n  statics: FirestoreStatics,\n  version,\n  namespace,\n  nativeModuleName,\n  nativeEvents,\n  hasMultiAppSupport: true,\n  hasCustomUrlOrRegionSupport: false,\n  ModuleClass: FirebaseFirestoreModule,\n});\n\n// import firestore, { firebase } from '@react-native-firebase/firestore';\n// firestore().X(...);\n// firebase.firestore().X(...);\nexport const firebase = getFirebaseRoot();\n"]},"metadata":{},"sourceType":"script"}